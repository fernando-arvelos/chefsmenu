{"ast":null,"code":"import _regeneratorRuntime from\"/home/fernando/trybe/Git Fernando/chefsmenu/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/fernando/trybe/Git Fernando/chefsmenu/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/fernando/trybe/Git Fernando/chefsmenu/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useLocation,useHistory}from'react-router-dom/cjs/react-router-dom.min';import{useDispatch}from'react-redux';import{fetchMealsByIngredients,fetchMealsByName,fetchMealsByFirstLetter,fetchDrinksByIngredients,fetchDrinksByName,fetchDrinksByFirstLetter}from'../services/Api';import{fetchFilteredMealsSuccessful,fetchFilteredDrinksSuccessful,changeFilterStatus}from'../redux/actions';import'../index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchBar(){var location=useLocation();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),radioOption=_useState2[0],setRadioOption=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),filterInput=_useState4[0],setFilterInput=_useState4[1];var _useState5=useState(location.pathname),_useState6=_slicedToArray(_useState5,1),myLocation=_useState6[0];var history=useHistory();var dispatch=useDispatch();var mealHandleChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var apiResponse,idMeal;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.t0=radioOption;_context.next=_context.t0==='ingredient'?3:_context.t0==='name'?7:_context.t0==='firstLetter'?11:15;break;case 3:_context.next=5;return fetchMealsByIngredients(filterInput);case 5:apiResponse=_context.sent;return _context.abrupt(\"break\",15);case 7:_context.next=9;return fetchMealsByName(filterInput);case 9:apiResponse=_context.sent;return _context.abrupt(\"break\",15);case 11:_context.next=13;return fetchMealsByFirstLetter(filterInput);case 13:apiResponse=_context.sent;return _context.abrupt(\"break\",15);case 15:try{if(apiResponse.length===1){idMeal=apiResponse[0].idMeal;history.push(\"/meals/\".concat(idMeal));}else{dispatch(changeFilterStatus(true));dispatch(fetchFilteredMealsSuccessful(apiResponse));}}catch(error){global.alert('Sorry, we haven\\'t found any recipes for these filters.');}case 16:case\"end\":return _context.stop();}},_callee);}));return function mealHandleChange(){return _ref.apply(this,arguments);};}();var drinkHandleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var apiResponse,idDrink;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.t0=radioOption;_context2.next=_context2.t0==='ingredient'?3:_context2.t0==='name'?7:_context2.t0==='firstLetter'?11:15;break;case 3:_context2.next=5;return fetchDrinksByIngredients(filterInput);case 5:apiResponse=_context2.sent;return _context2.abrupt(\"break\",15);case 7:_context2.next=9;return fetchDrinksByName(filterInput);case 9:apiResponse=_context2.sent;return _context2.abrupt(\"break\",15);case 11:_context2.next=13;return fetchDrinksByFirstLetter(filterInput);case 13:apiResponse=_context2.sent;return _context2.abrupt(\"break\",15);case 15:try{if(apiResponse.length===1){idDrink=apiResponse[0].idDrink;history.push(\"/drinks/\".concat(idDrink));}else{dispatch(changeFilterStatus(true));dispatch(fetchFilteredDrinksSuccessful(apiResponse));}}catch(error){global.alert('Sorry, we haven\\'t found any recipes for these filters.');}case 16:case\"end\":return _context2.stop();}},_callee2);}));return function drinkHandleChange(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"section\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-search\",children:[/*#__PURE__*/_jsx(\"input\",{\"data-testid\":\"search-input\",type:\"text\",placeholder:\"Search recipes\",value:filterInput,onChange:function onChange(_ref3){var target=_ref3.target;return setFilterInput(target.value);},className:\"search-input\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center h-[68px]\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"Ingredient\",className:\"label\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"Ingredient\",type:\"radio\",name:\"radioFilter\",value:\"ingredient\",\"data-testid\":\"ingredient-search-radio\",onChange:function onChange(_ref4){var target=_ref4.target;return setRadioOption(target.value);},className:\"mr-1\"}),\"Ingredient\"]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"Name\",className:\"label\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"Name\",type:\"radio\",name:\"radioFilter\",value:\"name\",\"data-testid\":\"name-search-radio\",onChange:function onChange(_ref5){var target=_ref5.target;return setRadioOption(target.value);},className:\"mr-1\"}),\"Name\"]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"firstLetter\",className:\"text-white\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"firstLetter\",type:\"radio\",name:\"radioFilter\",value:\"firstLetter\",\"data-testid\":\"first-letter-search-radio\",onChange:function onChange(_ref6){var target=_ref6.target;return setRadioOption(target.value);},className:\"mr-1\"}),\"First letter\"]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"exec-search-btn\",onClick:myLocation==='/drinks'?drinkHandleChange:mealHandleChange,className:\"btn-search bg-yellow \",children:\"Search\"})]})});}export default SearchBar;","map":{"version":3,"names":["React","useState","useLocation","useHistory","useDispatch","fetchMealsByIngredients","fetchMealsByName","fetchMealsByFirstLetter","fetchDrinksByIngredients","fetchDrinksByName","fetchDrinksByFirstLetter","fetchFilteredMealsSuccessful","fetchFilteredDrinksSuccessful","changeFilterStatus","SearchBar","location","radioOption","setRadioOption","filterInput","setFilterInput","pathname","myLocation","history","dispatch","mealHandleChange","apiResponse","length","idMeal","push","error","global","alert","drinkHandleChange","idDrink","target","value"],"sources":["/home/fernando/trybe/Git Fernando/chefsmenu/src/components/SearchBar.jsx"],"sourcesContent":["import React, { useState,\n} from 'react';\nimport { useLocation, useHistory } from 'react-router-dom/cjs/react-router-dom.min';\nimport { useDispatch } from 'react-redux';\nimport { fetchMealsByIngredients, fetchMealsByName,\n  fetchMealsByFirstLetter, fetchDrinksByIngredients,\n  fetchDrinksByName, fetchDrinksByFirstLetter } from '../services/Api';\nimport { fetchFilteredMealsSuccessful,\n  fetchFilteredDrinksSuccessful,\n  changeFilterStatus } from '../redux/actions';\nimport '../index.css';\n\nfunction SearchBar() {\n  const location = useLocation();\n  const [radioOption, setRadioOption] = useState('');\n  const [filterInput, setFilterInput] = useState('');\n  const [myLocation] = useState(location.pathname);\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const mealHandleChange = async () => {\n    let apiResponse;\n    switch (radioOption) {\n    case 'ingredient':\n      apiResponse = await fetchMealsByIngredients(filterInput);\n      break;\n    case 'name':\n      apiResponse = await fetchMealsByName(filterInput);\n      break;\n    case 'firstLetter':\n      apiResponse = await fetchMealsByFirstLetter(filterInput);\n      break;\n    default:\n    }\n    try {\n      if (apiResponse.length === 1) {\n        const { idMeal } = apiResponse[0];\n        history.push(`/meals/${idMeal}`);\n      } else {\n        dispatch(changeFilterStatus(true));\n        dispatch(fetchFilteredMealsSuccessful(apiResponse));\n      }\n    } catch (error) {\n      global.alert('Sorry, we haven\\'t found any recipes for these filters.');\n    }\n  };\n\n  const drinkHandleChange = async () => {\n    let apiResponse;\n    switch (radioOption) {\n    case 'ingredient':\n      apiResponse = await fetchDrinksByIngredients(filterInput);\n      break;\n    case 'name':\n      apiResponse = await fetchDrinksByName(filterInput);\n      break;\n    case 'firstLetter':\n      apiResponse = await fetchDrinksByFirstLetter(filterInput);\n      break;\n    default:\n    }\n    try {\n      if (apiResponse.length === 1) {\n        const { idDrink } = apiResponse[0];\n        history.push(`/drinks/${idDrink}`);\n      } else {\n        dispatch(changeFilterStatus(true));\n        dispatch(fetchFilteredDrinksSuccessful(apiResponse));\n      }\n    } catch (error) {\n      global.alert('Sorry, we haven\\'t found any recipes for these filters.');\n    }\n  };\n\n  return (\n    <section className=\"flex justify-center\">\n\n      <div className=\"container-search\">\n        <input\n          data-testid=\"search-input\"\n          type=\"text\"\n          placeholder=\"Search recipes\"\n          value={ filterInput }\n          onChange={ ({ target }) => setFilterInput(target.value) }\n          className=\"search-input\"\n        />\n\n        <div className=\"flex items-center h-[68px]\">\n          <label\n            htmlFor=\"Ingredient\"\n            className=\"label\"\n          >\n            <input\n              id=\"Ingredient\"\n              type=\"radio\"\n              name=\"radioFilter\"\n              value=\"ingredient\"\n              data-testid=\"ingredient-search-radio\"\n              onChange={ ({ target }) => setRadioOption(target.value) }\n              className=\"mr-1\"\n            />\n            Ingredient\n          </label>\n\n          <label\n            htmlFor=\"Name\"\n            className=\"label\"\n          >\n            <input\n              id=\"Name\"\n              type=\"radio\"\n              name=\"radioFilter\"\n              value=\"name\"\n              data-testid=\"name-search-radio\"\n              onChange={ ({ target }) => setRadioOption(target.value) }\n              className=\"mr-1\"\n            />\n            Name\n          </label>\n\n          <label\n            htmlFor=\"firstLetter\"\n            className=\"text-white\"\n          >\n            <input\n              id=\"firstLetter\"\n              type=\"radio\"\n              name=\"radioFilter\"\n              value=\"firstLetter\"\n              data-testid=\"first-letter-search-radio\"\n              onChange={ ({ target }) => setRadioOption(target.value) }\n              className=\"mr-1\"\n            />\n            First letter\n          </label>\n        </div>\n\n        <button\n          type=\"button\"\n          data-testid=\"exec-search-btn\"\n          onClick={ myLocation === '/drinks' ? drinkHandleChange : mealHandleChange }\n          className=\"btn-search bg-yellow \"\n        >\n          Search\n        </button>\n      </div>\n    </section>\n  );\n}\n\nexport default SearchBar;\n"],"mappings":"mZAAA,MAAOA,MAAK,EAAIC,QAAQ,KACjB,OAAO,CACd,OAASC,WAAW,CAAEC,UAAU,KAAQ,2CAA2C,CACnF,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,uBAAuB,CAAEC,gBAAgB,CAChDC,uBAAuB,CAAEC,wBAAwB,CACjDC,iBAAiB,CAAEC,wBAAwB,KAAQ,iBAAiB,CACtE,OAASC,4BAA4B,CACnCC,6BAA6B,CAC7BC,kBAAkB,KAAQ,kBAAkB,CAC9C,MAAO,cAAc,CAAC,wFAEtB,QAASC,UAAS,EAAG,CACnB,GAAMC,SAAQ,CAAGb,WAAW,EAAE,CAC9B,cAAsCD,QAAQ,CAAC,EAAE,CAAC,wCAA3Ce,WAAW,eAAEC,cAAc,eAClC,eAAsChB,QAAQ,CAAC,EAAE,CAAC,yCAA3CiB,WAAW,eAAEC,cAAc,eAClC,eAAqBlB,QAAQ,CAACc,QAAQ,CAACK,QAAQ,CAAC,yCAAzCC,UAAU,eACjB,GAAMC,QAAO,CAAGnB,UAAU,EAAE,CAC5B,GAAMoB,SAAQ,CAAGnB,WAAW,EAAE,CAE9B,GAAMoB,iBAAgB,4FAAG,uKAEfR,WAAW,6BACd,YAAY,iBAGZ,MAAM,iBAGN,aAAa,0CALIX,wBAAuB,CAACa,WAAW,CAAC,QAAxDO,WAAW,+EAGSnB,iBAAgB,CAACY,WAAW,CAAC,QAAjDO,WAAW,iFAGSlB,wBAAuB,CAACW,WAAW,CAAC,SAAxDO,WAAW,0DAIb,GAAI,CACF,GAAIA,WAAW,CAACC,MAAM,GAAK,CAAC,CAAE,CACpBC,MAAM,CAAKF,WAAW,CAAC,CAAC,CAAC,CAAzBE,MAAM,CACdL,OAAO,CAACM,IAAI,kBAAWD,MAAM,EAAG,CAClC,CAAC,IAAM,CACLJ,QAAQ,CAACV,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAClCU,QAAQ,CAACZ,4BAA4B,CAACc,WAAW,CAAC,CAAC,CACrD,CACF,CAAE,MAAOI,KAAK,CAAE,CACdC,MAAM,CAACC,KAAK,CAAC,yDAAyD,CAAC,CACzE,CAAC,sDACF,kBAzBKP,iBAAgB,0CAyBrB,CAED,GAAMQ,kBAAiB,6FAAG,8KAEhBhB,WAAW,+BACd,YAAY,kBAGZ,MAAM,kBAGN,aAAa,2CALIR,yBAAwB,CAACU,WAAW,CAAC,QAAzDO,WAAW,kFAGShB,kBAAiB,CAACS,WAAW,CAAC,QAAlDO,WAAW,oFAGSf,yBAAwB,CAACQ,WAAW,CAAC,SAAzDO,WAAW,4DAIb,GAAI,CACF,GAAIA,WAAW,CAACC,MAAM,GAAK,CAAC,CAAE,CACpBO,OAAO,CAAKR,WAAW,CAAC,CAAC,CAAC,CAA1BQ,OAAO,CACfX,OAAO,CAACM,IAAI,mBAAYK,OAAO,EAAG,CACpC,CAAC,IAAM,CACLV,QAAQ,CAACV,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAClCU,QAAQ,CAACX,6BAA6B,CAACa,WAAW,CAAC,CAAC,CACtD,CACF,CAAE,MAAOI,KAAK,CAAE,CACdC,MAAM,CAACC,KAAK,CAAC,yDAAyD,CAAC,CACzE,CAAC,wDACF,kBAzBKC,kBAAiB,2CAyBtB,CAED,mBACE,gBAAS,SAAS,CAAC,qBAAqB,uBAEtC,aAAK,SAAS,CAAC,kBAAkB,wBAC/B,cACE,cAAY,cAAc,CAC1B,IAAI,CAAC,MAAM,CACX,WAAW,CAAC,gBAAgB,CAC5B,KAAK,CAAGd,WAAa,CACrB,QAAQ,CAAG,4BAAGgB,OAAM,OAANA,MAAM,OAAOf,eAAc,CAACe,MAAM,CAACC,KAAK,CAAC,EAAE,CACzD,SAAS,CAAC,cAAc,EACxB,cAEF,aAAK,SAAS,CAAC,4BAA4B,wBACzC,eACE,OAAO,CAAC,YAAY,CACpB,SAAS,CAAC,OAAO,wBAEjB,cACE,EAAE,CAAC,YAAY,CACf,IAAI,CAAC,OAAO,CACZ,IAAI,CAAC,aAAa,CAClB,KAAK,CAAC,YAAY,CAClB,cAAY,yBAAyB,CACrC,QAAQ,CAAG,4BAAGD,OAAM,OAANA,MAAM,OAAOjB,eAAc,CAACiB,MAAM,CAACC,KAAK,CAAC,EAAE,CACzD,SAAS,CAAC,MAAM,EAChB,aAEJ,GAAQ,cAER,eACE,OAAO,CAAC,MAAM,CACd,SAAS,CAAC,OAAO,wBAEjB,cACE,EAAE,CAAC,MAAM,CACT,IAAI,CAAC,OAAO,CACZ,IAAI,CAAC,aAAa,CAClB,KAAK,CAAC,MAAM,CACZ,cAAY,mBAAmB,CAC/B,QAAQ,CAAG,4BAAGD,OAAM,OAANA,MAAM,OAAOjB,eAAc,CAACiB,MAAM,CAACC,KAAK,CAAC,EAAE,CACzD,SAAS,CAAC,MAAM,EAChB,OAEJ,GAAQ,cAER,eACE,OAAO,CAAC,aAAa,CACrB,SAAS,CAAC,YAAY,wBAEtB,cACE,EAAE,CAAC,aAAa,CAChB,IAAI,CAAC,OAAO,CACZ,IAAI,CAAC,aAAa,CAClB,KAAK,CAAC,aAAa,CACnB,cAAY,2BAA2B,CACvC,QAAQ,CAAG,4BAAGD,OAAM,OAANA,MAAM,OAAOjB,eAAc,CAACiB,MAAM,CAACC,KAAK,CAAC,EAAE,CACzD,SAAS,CAAC,MAAM,EAChB,eAEJ,GAAQ,GACJ,cAEN,eACE,IAAI,CAAC,QAAQ,CACb,cAAY,iBAAiB,CAC7B,OAAO,CAAGd,UAAU,GAAK,SAAS,CAAGW,iBAAiB,CAAGR,gBAAkB,CAC3E,SAAS,CAAC,uBAAuB,UAClC,QAED,EAAS,GACL,EACE,CAEd,CAEA,cAAeV,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}