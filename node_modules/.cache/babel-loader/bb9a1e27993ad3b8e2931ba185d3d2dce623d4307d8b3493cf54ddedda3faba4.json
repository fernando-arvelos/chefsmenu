{"ast":null,"code":"import _slicedToArray from\"/home/fernando/trybe/Git Fernando/chefsmenu/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react-hooks/exhaustive-deps */import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useLocation,useParams}from'react-router-dom/cjs/react-router-dom.min';import{getMealDetails,getDrinkDetails}from'../redux/actions';import DetailsCard from'../components/DetailsCard';import HeaderRecipe from'../components/HeaderRecipe';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RecipeDetails(){var _useParams=useParams(),id=_useParams.id;var location=useLocation();var currentPath=location.pathname;var typeOfRecipe=currentPath.match(/\\/([^/]+)/)[1];var dispatch=useDispatch();var recipeDetails=useSelector(function(state){return state.recipeDetailsReducer.recipeDetails;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),ingredients=_useState2[0],setIngredients=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),measures=_useState4[0],setMeasures=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),recipeMade=_useState6[0],setRecipeMade=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),recipeInProgress=_useState8[0],setRecipeInProgress=_useState8[1];var shareTextStatus=useSelector(function(state){return state.recipeDetailsReducer.shareTextStatus;});var filterIngredientsAndMeasures=function filterIngredientsAndMeasures(){if(recipeDetails.length>0){var filteredIngredients=Object.entries(recipeDetails[0]).filter(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];var isIngredient=key.includes('strIngredient');var isValueValid=value!==null&&value!=='';return isIngredient&&isValueValid;}).map(function(_ref3){var _ref4=_slicedToArray(_ref3,2),value=_ref4[1];return value;});var filterMeasures=Object.entries(recipeDetails[0]).filter(function(_ref5){var _ref6=_slicedToArray(_ref5,2),key=_ref6[0],value=_ref6[1];var isMeasure=key.includes('strMeasure');var isValueValid=value!==null&&value!==' ';return isMeasure&&isValueValid;}).map(function(_ref7){var _ref8=_slicedToArray(_ref7,2),value=_ref8[1];return value;});setIngredients(filteredIngredients);setMeasures(filterMeasures);}};useEffect(function(){if(currentPath.includes('meals'))dispatch(getMealDetails(id));if(currentPath.includes('drinks'))dispatch(getDrinkDetails(id));var doneRecipes=JSON.parse(localStorage.getItem('doneRecipes'));if(doneRecipes){var verifyDoneRecipe=doneRecipes.some(function(recipe){return recipe.id===id;});setRecipeMade(verifyDoneRecipe);}var inProgressRecipes=JSON.parse(localStorage.getItem('inProgressRecipes'));if(inProgressRecipes){var idsInProgress=Object.keys(inProgressRecipes[typeOfRecipe]);var verifyIdsInProgress=idsInProgress.some(function(inProgressId){return id===inProgressId;});setRecipeInProgress(verifyIdsInProgress);}},[]);useEffect(function(){filterIngredientsAndMeasures();},[recipeDetails]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeaderRecipe,{}),recipeDetails.length>0&&/*#__PURE__*/_jsx(DetailsCard,{recipeImg:currentPath.includes('meals')?recipeDetails[0].strMealThumb:recipeDetails[0].strDrinkThumb,recipeTitle:currentPath.includes('meals')?recipeDetails[0].strMeal:recipeDetails[0].strDrink,recipeCategory:currentPath.includes('meals')?recipeDetails[0].strCategory:recipeDetails[0].strAlcoholic,recipeIngredients:ingredients,recipeMeasures:measures,recipeInstructions:recipeDetails[0].strInstructions,recipeVideo:currentPath.includes('meals')?recipeDetails[0].strYoutube:''}),!recipeMade&&/*#__PURE__*/_jsx(Link,{to:currentPath.includes('/meals')?\"/meals/\".concat(id,\"/in-progress\"):\"/drinks/\".concat(id,\"/in-progress\"),children:/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"start-recipe-btn\",className:\"fixed bottom-0\",children:recipeInProgress?'Continue Recipe':'Start Recipe'})}),shareTextStatus&&/*#__PURE__*/_jsx(\"p\",{children:\"Link copied!\"})]});}export default RecipeDetails;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","Link","useLocation","useParams","getMealDetails","getDrinkDetails","DetailsCard","HeaderRecipe","RecipeDetails","id","location","currentPath","pathname","typeOfRecipe","match","dispatch","recipeDetails","state","recipeDetailsReducer","ingredients","setIngredients","measures","setMeasures","recipeMade","setRecipeMade","recipeInProgress","setRecipeInProgress","shareTextStatus","filterIngredientsAndMeasures","length","filteredIngredients","Object","entries","filter","key","value","isIngredient","includes","isValueValid","map","filterMeasures","isMeasure","doneRecipes","JSON","parse","localStorage","getItem","verifyDoneRecipe","some","recipe","inProgressRecipes","idsInProgress","keys","verifyIdsInProgress","inProgressId","strMealThumb","strDrinkThumb","strMeal","strDrink","strCategory","strAlcoholic","strInstructions","strYoutube"],"sources":["/home/fernando/trybe/Git Fernando/chefsmenu/src/pages/RecipeDetails.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useLocation, useParams } from 'react-router-dom/cjs/react-router-dom.min';\nimport { getMealDetails, getDrinkDetails } from '../redux/actions';\nimport DetailsCard from '../components/DetailsCard';\nimport HeaderRecipe from '../components/HeaderRecipe';\n\nfunction RecipeDetails() {\n  const { id } = useParams();\n  const location = useLocation();\n  const currentPath = location.pathname;\n  const typeOfRecipe = currentPath.match(/\\/([^/]+)/)[1];\n  const dispatch = useDispatch();\n  const recipeDetails = useSelector((state) => state.recipeDetailsReducer.recipeDetails);\n  const [ingredients, setIngredients] = useState([]);\n  const [measures, setMeasures] = useState([]);\n  const [recipeMade, setRecipeMade] = useState();\n  const [recipeInProgress, setRecipeInProgress] = useState();\n  const shareTextStatus = useSelector(\n    (state) => state.recipeDetailsReducer.shareTextStatus,\n  );\n  const filterIngredientsAndMeasures = () => {\n    if (recipeDetails.length > 0) {\n      const filteredIngredients = Object.entries(recipeDetails[0]).filter(\n        ([key, value]) => {\n          const isIngredient = key.includes('strIngredient');\n          const isValueValid = value !== null && value !== '';\n          return isIngredient && isValueValid;\n        },\n      ).map(([, value]) => value);\n      const filterMeasures = Object.entries(recipeDetails[0]).filter(\n        ([key, value]) => {\n          const isMeasure = key.includes('strMeasure');\n          const isValueValid = value !== null && value !== ' ';\n          return isMeasure && isValueValid;\n        },\n      ).map(([, value]) => value);\n      setIngredients(filteredIngredients);\n      setMeasures(filterMeasures);\n    }\n  };\n  useEffect(() => {\n    if (currentPath.includes('meals')) dispatch(getMealDetails(id));\n    if (currentPath.includes('drinks')) dispatch(getDrinkDetails(id));\n    const doneRecipes = JSON.parse(localStorage.getItem('doneRecipes'));\n    if (doneRecipes) {\n      const verifyDoneRecipe = doneRecipes.some((recipe) => recipe.id === id);\n      setRecipeMade(verifyDoneRecipe);\n    }\n    const inProgressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    if (inProgressRecipes) {\n      const idsInProgress = Object.keys(inProgressRecipes[typeOfRecipe]);\n      const verifyIdsInProgress = idsInProgress.some(\n        (inProgressId) => id === inProgressId,\n      );\n      setRecipeInProgress(verifyIdsInProgress);\n    }\n  }, []);\n  useEffect(() => {\n    filterIngredientsAndMeasures();\n  }, [recipeDetails]);\n  return (\n    <div>\n      <HeaderRecipe />\n      {recipeDetails.length > 0\n      && <DetailsCard\n        recipeImg={ currentPath.includes('meals')\n          ? recipeDetails[0].strMealThumb : recipeDetails[0].strDrinkThumb }\n        recipeTitle={ currentPath.includes('meals')\n          ? recipeDetails[0].strMeal : recipeDetails[0].strDrink }\n        recipeCategory={ currentPath.includes('meals')\n          ? recipeDetails[0].strCategory : recipeDetails[0].strAlcoholic }\n        recipeIngredients={ ingredients }\n        recipeMeasures={ measures }\n        recipeInstructions={ recipeDetails[0].strInstructions }\n        recipeVideo={ currentPath.includes('meals') ? recipeDetails[0].strYoutube : '' }\n      />}\n      { !recipeMade\n      && (\n        <Link\n          to={\n            currentPath.includes('/meals')\n              ? `/meals/${id}/in-progress`\n              : `/drinks/${id}/in-progress`\n          }\n        >\n          <button\n            data-testid=\"start-recipe-btn\"\n            className=\"fixed bottom-0\"\n          >\n            {recipeInProgress\n              ? 'Continue Recipe'\n              : 'Start Recipe'}\n          </button>\n        </Link>\n      )}\n      { shareTextStatus && (\n        <p>Link copied!</p>\n      )}\n    </div>\n  );\n}\nexport default RecipeDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}